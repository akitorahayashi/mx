layer: planners
branch_prefix: jules-planner-

constraints:
  - Only process issues where requires_deep_analysis is true
  - Expand analysis in-place (overwrite the issue file)
  - Set requires_deep_analysis to false after expansion
  - Preserve and expand deep_analysis_reason with detailed findings
  - Do NOT create task files
  - Issue file path is authoritative (includes workstream)

inputs:
  - Local issue file path (provided as argument)
  - .jules/workstreams/<workstream>/exchange/issues/<priority>/<issue>.yml (where requires_deep_analysis: true)

outputs:
  - .jules/workstreams/<workstream>/exchange/issues/<priority>/<issue>.yml (expanded, requires_deep_analysis: false)

workflow:
  - 1. Read target issue, verify requires_deep_analysis is true
  - 2. Review deep_analysis_reason to understand the scope of analysis needed
  - 3. Analyze full system impact and dependency tree
  - 4. Expand issue with detailed analysis (affected_areas, constraints, risks, specifics)
  - 5. Set requires_deep_analysis to false
  - 6. Append analysis findings to deep_analysis_reason (preserve original rationale)
  - 7. Overwrite the issue file with expanded content
